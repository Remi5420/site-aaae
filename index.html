<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agence d'Architecture</title>
    <!-- Tailwind CSS CDN pour un design responsive et moderne -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Police Montserrat pour correspondre au logo */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f7f7f7;
            color: #333;
            scroll-behavior: smooth;
        }
        .nav-link.active {
            font-weight: 600;
            border-bottom: 2px solid #000;
        }
        /* Style pour la carte Leaflet */
        #map-container {
            height: 600px;
            width: 100%;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-lg */
        }
        .leaflet-popup-content-wrapper, .leaflet-popup-tip {
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        /* Styles pour le carrousel */
        .carousel-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 1rem;
        }
        .carousel-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
            /* Utilisation de scroll-snap pour un défilement fluide */
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            overflow-x: scroll;
        }
        .carousel-item {
            flex: 0 0 100%;
            width: 100%;
            scroll-snap-align: start;
        }
        .carousel-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s;
        }
        .carousel-nav-btn:hover {
            background: rgba(0, 0, 0, 0.8);
        }
    </style>
    <!-- CSS Leaflet.js -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Barre de navigation - Reste visible sur toutes les pages -->
    <nav class="sticky top-0 z-50 bg-white shadow-sm py-4">
        <div class="container mx-auto px-4 flex justify-center space-x-8 md:space-x-12">
            <a href="#home" data-page="home" class="nav-link text-lg md:text-xl font-medium text-gray-700 hover:text-black transition-colors duration-300">Accueil</a>
            <a href="#portfolio" data-page="portfolio" class="nav-link text-lg md:text-xl font-medium text-gray-700 hover:text-black transition-colors duration-300">Projets</a>
            <a href="#map-projects" data-page="map-projects" class="nav-link text-lg md:text-xl font-medium text-gray-700 hover:text-black transition-colors duration-300">Carte des projets</a>
            <a href="#about" data-page="about" class="nav-link text-lg md:text-xl font-medium text-gray-700 hover:text-black transition-colors duration-300">Présentation</a>
            <a href="#contact" data-page="contact" class="nav-link text-lg md:text-xl font-medium text-gray-700 hover:text-black transition-colors duration-300">Contact</a>
        </div>
    </nav>

    <main class="flex-grow">
        <!-- Section de la page d'accueil avec le logo -->
        <section id="home" data-page="home" class="page-section flex items-center justify-center min-h-screen">
            <div class="text-center p-8">
                <img src="images/logo.jpg" alt="Logo de l'agence Alter Ego" class="mx-auto w-64 md:w-80 mb-6">
                <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-gray-900">
                    Alter Ego
                </h1>
                <p class="mt-4 text-xl md:text-2xl text-gray-600 font-light">
                    ATELIER D'ARCHITECTURE
                </p>
            </div>
        </section>

        <!-- Section de la page des projets (portfolio) -->
        <section id="portfolio" data-page="portfolio" class="page-section hidden pt-12 md:pt-20 pb-16 px-4 md:px-8">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Nos Projets</h2>
                
                <!-- Boutons de filtre de catégorie -->
                <div class="flex justify-center space-x-4 mb-8">
                    <button class="filter-btn py-2 px-4 rounded-full text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors duration-200" data-filter="all">Tous</button>
                    <button class="filter-btn py-2 px-4 rounded-full text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors duration-200" data-filter="residential">Résidentiel</button>
                    <button class="filter-btn py-2 px-4 rounded-full text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors duration-200" data-filter="commercial">Commercial</button>
                    <button class="filter-btn py-2 px-4 rounded-full text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors duration-200" data-filter="public">Public</button>
                </div>

                <div class="projects-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Projet 1 (Paris) - Catégorie Résidentiel -->
                    <a href="#project-4" data-page="project-4" data-category="residential" class="project-item group relative block overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 transform hover:-translate-y-2">
                        <img src="images/maison-oconnor.jpg" alt="Image du Projet 1" class="w-full aspect-square object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="text-center text-white">
                                <h3 class="text-xl font-semibold mt-2">Appartement Haussmannien</h3>
                                <p class="text-sm font-light mt-1">Rénovation d'une résidence privée</p>
                            </div>
                        </div>
                    </a>
                    <!-- Projet 2 (Paris) - Catégorie Commercial -->
                    <a href="#project-5" data-page="project-5" data-category="commercial" class="project-item group relative block overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 transform hover:-translate-y-2">
                         <img src="images/bureaux-xyz.jpg" alt="Image du Projet 2" class="w-full aspect-square object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="text-center text-white">
                                <h3 class="text-xl font-semibold mt-2">Boutique de Luxe Parisienne</h3>
                                <p class="text-sm font-light mt-1">Espace commercial</p>
                            </div>
                        </div>
                    </a>
                    <!-- Projet 3 (Paris) - Catégorie Public -->
                    <a href="#project-6" data-page="project-6" data-category="public" class="project-item group relative block overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 transform hover:-translate-y-2">
                        <img src="images/musee-art.jpg" alt="Image du Projet 3" class="w-full aspect-square object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="text-center text-white">
                                <h3 class="text-xl font-semibold mt-2">Bibliothèque du Quartier Latin</h3>
                                <p class="text-sm font-light mt-1">Bâtiment public</p>
                            </div>
                        </div>
                    </a>
                    <!-- Ajoute d'autres projets ici si nécessaire -->
                </div>
            </div>
        </section>
        
        <!-- Nouvelle section pour la carte des projets -->
        <section id="map-projects" data-page="map-projects" class="page-section hidden pt-12 md:pt-20 pb-16 px-4 md:px-8">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Carte de nos Projets</h2>
                <!-- Le conteneur de la carte -->
                <div id="map-container"></div>
            </div>
        </section>
        
        <!-- Section pour la page détaillée du Projet 4 (Paris) -->
        <section id="project-4" data-page="project-4" class="page-section hidden pt-12 md:pt-20 pb-16 px-4 md:px-8">
            <div class="container mx-auto max-w-4xl">
                <a href="#portfolio" data-page="portfolio" class="go-back-link text-gray-600 hover:text-black transition-colors duration-300 mb-8 inline-block">&larr; Retour aux projets</a>
                <h2 class="text-4xl md:text-5xl font-bold mb-4">Appartement Haussmannien</h2>

                <!-- CARROUSEL PHOTO -->
                <div class="carousel-container relative">
                    <div class="carousel-wrapper flex">
                        <!-- Remplacez les liens d'image ci-dessous par les vôtres -->
                        <div class="carousel-item">
                            <img src="images/maison-oconnor-exterieur.jpg" alt="Vue extérieure de la Maison O'Connor" class="w-full rounded-xl shadow-lg">
                        </div>
                        <div class="carousel-item">
                            <img src="images/maison-oconnor-interieur.jpg" alt="Vue intérieure de la Maison O'Connor" class="w-full rounded-xl shadow-lg">
                        </div>
                        <div class="carousel-item">
                            <img src="https://placehold.co/1000x600/E3F2FD/0D47A1?text=Image+3" alt="Image 3" class="w-full rounded-xl shadow-lg">
                        </div>
                    </div>
                    <button class="carousel-nav-btn left-2 md:left-4" data-direction="prev">&#10094;</button>
                    <button class="carousel-nav-btn right-2 md:right-4" data-direction="next">&#10095;</button>
                </div>
                <!-- FIN CARROUSEL PHOTO -->

                <div class="mt-8 prose max-w-none text-gray-700">
                    <h3 class="text-2xl font-semibold mb-4">Détails du projet</h3>
                    <ul class="list-disc list-inside space-y-2 mb-6">
                        <li><strong>Montant :</strong> 350 000€</li>
                        <li><strong>Lieu :</strong> Paris 16e arrondissement, France</li>
                        <li><strong>Surface :</strong> 250 m²</li>
                        <li><strong>Année :</strong> 2023</li>
                    </ul>
                    <p class="leading-relaxed">Ce projet de rénovation a transformé un appartement haussmannien classique en un espace de vie moderne et fonctionnel, tout en préservant son charme historique. Les moulures et les cheminées d'origine ont été conservées et mises en valeur, créant un contraste élégant avec les équipements contemporains.</p>
                    <p class="leading-relaxed">L'agencement intérieur a été repensé pour optimiser l'espace et la lumière naturelle. Le design a été centré sur des matériaux de haute qualité et une palette de couleurs sophistiquée, reflétant l'élégance parisienne.</p>
                </div>
            </div>
        </section>
        
        <!-- Section pour la page détaillée du Projet 5 (Paris) -->
        <section id="project-5" data-page="project-5" class="page-section hidden pt-12 md:pt-20 pb-16 px-4 md:px-8">
            <div class="container mx-auto max-w-4xl">
                <a href="#portfolio" data-page="portfolio" class="go-back-link text-gray-600 hover:text-black transition-colors duration-300 mb-8 inline-block">&larr; Retour aux projets</a>
                <h2 class="text-4xl md:text-5xl font-bold mb-4">Boutique de Luxe Parisienne</h2>

                <!-- CARROUSEL PHOTO -->
                <div class="carousel-container relative">
                    <div class="carousel-wrapper flex">
                        <!-- Remplacez les liens d'image ci-dessous par les vôtres -->
                        <div class="carousel-item">
                            <img src="images/bureaux-exterieur.jpg" alt="Vue extérieure des bureaux XYZ" class="w-full rounded-xl shadow-lg">
                        </div>
                        <div class="carousel-item">
                            <img src="images/bureaux-interieur.jpg" alt="Espace de travail des bureaux XYZ" class="w-full rounded-xl shadow-lg">
                        </div>
                         <div class="carousel-item">
                            <img src="https://placehold.co/1000x600/E3F2FD/0D47A1?text=Image+3" alt="Image 3" class="w-full rounded-xl shadow-lg">
                        </div>
                    </div>
                    <button class="carousel-nav-btn left-2 md:left-4" data-direction="prev">&#10094;</button>
                    <button class="carousel-nav-btn right-2 md:right-4" data-direction="next">&#10095;</button>
                </div>
                <!-- FIN CARROUSEL PHOTO -->

                <div class="mt-8 prose max-w-none text-gray-700">
                    <h3 class="text-2xl font-semibold mb-4">Détails du projet</h3>
                    <ul class="list-disc list-inside space-y-2 mb-6">
                        <li><strong>Montant :</strong> 2 100 000€</li>
                        <li><strong>Lieu :</strong> Paris 8e arrondissement, France</li>
                        <li><strong>Surface :</strong> 1200 m²</li>
                        <li><strong>Année :</strong> 2022</li>
                    </ul>
                    <p class="leading-relaxed">Nous avons conçu cette boutique de luxe pour une marque de haute couture renommée. Le projet visait à créer un espace qui incarne l'élégance et l'exclusivité de la marque. Nous avons utilisé des matériaux nobles comme le marbre, le bois de noyer et le laiton pour créer une atmosphère sophistiquée.</p>
                    <p class="leading-relaxed">Chaque détail, de l'éclairage aux présentoirs, a été soigneusement pensé pour mettre en valeur les produits et offrir une expérience d'achat immersive. Les vitrines ont été conçues comme des œuvres d'art, attirant les passants et les invitant à découvrir l'univers de la marque.</p>
                </div>
            </div>
        </section>
        
        <!-- Section pour la page détaillée du Projet 6 (Paris) -->
        <section id="project-6" data-page="project-6" class="page-section hidden pt-12 md:pt-20 pb-16 px-4 md:px-8">
            <div class="container mx-auto max-w-4xl">
                <a href="#portfolio" data-page="portfolio" class="go-back-link text-gray-600 hover:text-black transition-colors duration-300 mb-8 inline-block">&larr; Retour aux projets</a>
                <h2 class="text-4xl md:text-5xl font-bold mb-4">Bibliothèque du Quartier Latin</h2>

                 <!-- CARROUSEL PHOTO -->
                <div class="carousel-container relative">
                    <div class="carousel-wrapper flex">
                        <!-- Remplacez les liens d'image ci-dessous par les vôtres -->
                        <div class="carousel-item">
                            <img src="images/musee-facade.jpg" alt="Façade du musée de l'art moderne" class="w-full rounded-xl shadow-lg">
                        </div>
                        <div class="carousel-item">
                            <img src="images/musee-galerie.jpg" alt="Galerie d'exposition du musée" class="w-full rounded-xl shadow-lg">
                        </div>
                         <div class="carousel-item">
                            <img src="https://placehold.co/1000x600/E3F2FD/0D47A1?text=Image+3" alt="Image 3" class="w-full rounded-xl shadow-lg">
                        </div>
                    </div>
                    <button class="carousel-nav-btn left-2 md:left-4" data-direction="prev">&#10094;</button>
                    <button class="carousel-nav-btn right-2 md:right-4" data-direction="next">&#10095;</button>
                </div>
                <!-- FIN CARROUSEL PHOTO -->

                <div class="mt-8 prose max-w-none text-gray-700">
                    <h3 class="text-2xl font-semibold mb-4">Détails du projet</h3>
                    <ul class="list-disc list-inside space-y-2 mb-6">
                        <li><strong>Montant :</strong> 8 500 000€</li>
                        <li><strong>Lieu :</strong> Paris 5e arrondissement, France</li>
                        <li><strong>Surface :</strong> 5000 m²</li>
                        <li><strong>Année :</strong> 2021</li>
                    </ul>
                    <p class="leading-relaxed">Ce projet de bibliothèque publique dans le Quartier Latin visait à créer un espace d'apprentissage et de communauté moderne qui respecte le patrimoine architectural du quartier. Le bâtiment, avec sa façade en pierre et ses grandes fenêtres, est une exploration de la lumière et de l'espace.</p>
                </div>
            </div>
        </section>

        <!-- Section de la page de présentation -->
        <section id="about" data-page="about" class="page-section hidden pt-12 md:pt-20 pb-16 px-4 md:px-8">
            <div class="container mx-auto max-w-4xl text-gray-700">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">À Propos de l'Agence</h2>
                <p class="text-lg leading-relaxed mb-6">
                    Fondée en [Année de fondation], notre agence d'architecture s'engage à créer des espaces qui allient esthétisme, fonctionnalité et durabilité. Nous croyons que chaque projet est une histoire unique, et nous travaillons en étroite collaboration avec nos clients pour transformer leurs visions en réalités architecturales. Notre démarche se concentre sur l'innovation, le respect de l'environnement et l'utilisation de matériaux locaux.
                </p>
                <div class="mt-12">
                    <h3 class="text-2xl font-semibold text-center mb-6">L'Équipe</h3>
                    <div class="flex flex-wrap justify-center gap-8">
                        <div class="text-center">
                            <img src="images/equipe1.jpg" alt="Photo de l'architecte" class="w-32 h-32 rounded-full mx-auto mb-2 shadow-lg">
                            <p class="font-semibold text-lg">Prénom Nom 1</p>
                            <p class="text-sm text-gray-500">Architecte associé</p>
                        </div>
                        <div class="text-center">
                            <img src="images/equipe2.jpg" alt="Photo de l'architecte" class="w-32 h-32 rounded-full mx-auto mb-2 shadow-lg">
                            <p class="font-semibold text-lg">Prénom Nom 2</p>
                            <p class="text-sm text-gray-500">Architecte chef de projet</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section de la page de contact -->
        <section id="contact" data-page="contact" class="page-section hidden pt-12 md:pt-20 pb-16 px-4 md:px-8">
            <div class="container mx-auto max-w-2xl text-gray-700">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Nous Contacter</h2>
                <div class="bg-white p-8 rounded-xl shadow-lg">
                    <!-- Mise à jour pour afficher uniquement les informations de contact -->
                    <div class="text-center">
                        <p class="text-lg font-medium">Contact direct</p>
                        <p class="text-gray-600 mt-2">Email: contact@agence.com</p>
                        <p class="text-gray-600">Téléphone: +33 1 23 45 67 89</p>
                        <p class="text-gray-600 mt-4">Adresse: 123 Rue de l'Architecture, 75000 Paris</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="bg-gray-900 text-white py-6 mt-12">
        <div class="container mx-auto text-center text-sm">
            <p>&copy; 2024 Agence d'Architecture. Tous droits réservés.</p>
        </div>
    </footer>

    <!-- JS Leaflet.js -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20n6c9Lp+b/d+E2/S/9G+V+U+b+Q+A+t+Z+O+S+N+Y="
        crossorigin=""></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pageSections = document.querySelectorAll('.page-section');
            const projectItems = document.querySelectorAll('.project-item');
            const filterButtons = document.querySelectorAll('.filter-btn');
            let map; 

            const showPage = (pageId) => {
                pageSections.forEach(section => {
                    if (section.id === pageId) {
                        section.classList.remove('hidden');
                        section.classList.add('flex', 'flex-col');
                    } else {
                        section.classList.add('hidden');
                        section.classList.remove('flex', 'flex-col');
                    }
                });

                if (pageId === 'map-projects') {
                    // Utiliser un setTimeout pour s'assurer que le conteneur de la carte est
                    // bien rendu et a des dimensions avant d'initialiser Leaflet.
                    setTimeout(() => {
                        // Si la carte existe déjà, on recalcule sa taille. Sinon, on l'initialise.
                        if (map) {
                            map.invalidateSize();
                        } else {
                            initMap();
                        }
                    }, 100); // Un délai de 100ms est généralement suffisant
                }
            };

            const setActiveLink = (pageId) => {
                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    if (link.dataset.page === pageId) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            };

            const filterProjects = (category) => {
                projectItems.forEach(item => {
                    const projectCategory = item.dataset.category;
                    if (category === 'all' || projectCategory === category) {
                        item.classList.remove('hidden');
                    } else {
                        item.classList.add('hidden');
                    }
                });
            };

            // Écouteur de clics sur les boutons de filtre
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Supprime la classe active de tous les boutons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Ajoute la classe active au bouton cliqué
                    button.classList.add('active');

                    const filter = button.dataset.filter;
                    filterProjects(filter);
                });
            });

            // Nouvelle logique de navigation utilisant la délégation d'événements
            document.body.addEventListener('click', (e) => {
                const link = e.target.closest('[data-page]');
                if (link) {
                    e.preventDefault();
                    const targetPage = link.dataset.page;
                    
                    window.location.hash = targetPage;
                    
                    showPage(targetPage);
                    setActiveLink(targetPage);

                    initCarousels();
                }
            });

            const initMap = () => {
                // Centrage sur Paris et zoom 13 pour une vue de la ville
                map = L.map('map-container').setView([48.8566, 2.3522], 13);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);

                // Nouveaux projets basés à Paris
                const projects = [
                    {
                        name: "Appartement Haussmannien",
                        coords: [48.8687, 2.3087], // 16e arrondissement
                        pageId: "project-4",
                    },
                    {
                        name: "Boutique de Luxe Parisienne",
                        coords: [48.8718, 2.3175], // 8e arrondissement
                        pageId: "project-5",
                    },
                    {
                        name: "Bibliothèque du Quartier Latin",
                        coords: [48.8465, 2.3444], // 5e arrondissement
                        pageId: "project-6",
                    }
                ];

                projects.forEach(project => {
                    L.marker(project.coords)
                        .addTo(map)
                        .bindPopup(`
                            <div class="text-center font-semibold">
                                <a href="#${project.pageId}" data-page="${project.pageId}" class="text-blue-600 hover:underline">
                                    ${project.name}
                                </a>
                            </div>
                        `);
                });
            };

            const initCarousels = () => {
                document.querySelectorAll('.carousel-container').forEach(container => {
                    const wrapper = container.querySelector('.carousel-wrapper');
                    const prevBtn = container.querySelector('[data-direction="prev"]');
                    const nextBtn = container.querySelector('[data-direction="next"]');
                    let currentIndex = 0;
                    const items = wrapper.querySelectorAll('.carousel-item');
                    const totalItems = items.length;

                    const updateCarousel = () => {
                        const offset = -currentIndex * 100;
                        wrapper.style.transform = `translateX(${offset}%)`;
                    };

                    if(nextBtn){
                        nextBtn.addEventListener('click', () => {
                            if (currentIndex < totalItems - 1) {
                                currentIndex++;
                            } else {
                                currentIndex = 0;
                            }
                            updateCarousel();
                        });
                    }
                    
                    if(prevBtn){
                        prevBtn.addEventListener('click', () => {
                            if (currentIndex > 0) {
                                currentIndex--;
                            } else {
                                currentIndex = totalItems - 1;
                            }
                            updateCarousel();
                        });
                    }

                    let startX;
                    if(wrapper){
                        wrapper.addEventListener('touchstart', (e) => {
                            startX = e.touches[0].clientX;
                        });
                        wrapper.addEventListener('touchmove', (e) => {
                            e.preventDefault();
                        });
                        wrapper.addEventListener('touchend', (e) => {
                            const endX = e.changedTouches[0].clientX;
                            if (startX - endX > 50) {
                                if (currentIndex < totalItems - 1) {
                                    currentIndex++;
                                } else {
                                    currentIndex = 0;
                                }
                            } else if (startX - endX < -50) {
                                if (currentIndex > 0) {
                                    currentIndex--;
                                } else {
                                    currentIndex = totalItems - 1;
                                }
                            }
                            updateCarousel();
                        });
                    }
                });
            };

            // Gérer les boutons retour/avance du navigateur
            window.addEventListener('popstate', () => {
                const currentPage = window.location.hash.substring(1) || 'home';
                showPage(currentPage);
                setActiveLink(currentPage);
            });

            // Afficher la page par défaut au chargement
            const initialPage = window.location.hash.substring(1) || 'home';
            showPage(initialPage);
            setActiveLink(initialPage);
            initCarousels();
            // Appliquer le filtre "Tous" par défaut
            filterProjects('all');
        });
    </script>
</body>
</html>
